<head>
  <title>testing</title>
</head>

<body>

  {{> invoiceTestTemplate }}

</body>

<template name="editTemplate__String">
	
	<label>{{ key }}</label>
	<input type="text" value="{{ value }}">
	
</template>

<template name="editTemplate__Collection">

	{{#each value }}

		{{> Template.dynamic template=getTemplateFromType }}

	{{/each}}

	<button class="temp-add-new-coll-item">
		Add 1: {{ key }}
	</button>

</template>

<template name="editTemplate">

	<div class="wrap">

		{{! Iterate over all the fields, get the corresponding field }}
		{{#each getReactiveValuesAsArray }}

			<div class="wrap">

				<p><em>{{ key }} &lt;{{ type }}&gt;</em></p>

				{{> Template.dynamic template=getTemplateFromType data=data }}

			</div>

		{{/each }}

	</div>
	
</template>

<template name="invoiceTestTemplate">

	{{> editTemplate invoice }}

	{{> editTemplate person }}

	<hr>

	{{#with invoice }}

	  <button>Reverse that shit</button>

	  <input type="text" value="{{ getReactiveValue 'something' }}">

  	<h1>Invoice {{ getReactiveValue 'invoiceName' }}</h1>

  	<ul>

	  	{{#each getReactiveValue 'items' }}

	  		<li>
	  			<span class="change-val">{{ getReactiveValue 'itemName' }}, </span>
	  			{{ getReactiveValue 'units' }} {{ getReactiveValue 'unitDescription' }} 
	  			@ {{ getReactiveValue 'unitPrice' }} {{ ../getReactiveValue 'currency' }}
	  			= {{ endPrice }} 
	  			({{ priceAfterTax }} after {{ getReactiveValue 'tax' }}% 
	  			{{ getReactiveValue 'taxDescription' }})
	  		</li>

	  	{{/each}}

	  	<p>
	  		Total price: {{ items.getTotal 'endPrice' }} 
	  		{{ getReactiveValue 'currency' }}
	  	</p>
	  	<p>
	  		with taxes: {{ items.getTotal 'priceAfterTax' }} 
	  		{{ getReactiveValue 'currency' }}
	  	</p>

		</ul>

		{{#with getReactiveValue 'client' }}

			<p><em>This is the client object from the invoice…</em></p>

			<h1>{{ getReactiveValue 'clientName' }}</h1>
			<p>{{ getReactiveValue 'adressStreet' }}</p>

		{{/with}}

		<hr>

  {{/with}}

  {{#with client }}

  	<p><em>Just the client…</em></p>

		<h1>{{ getReactiveValue 'clientName' }}</h1>
		<p>{{ getReactiveValue 'adressStreet' }}</p>

	{{/with}}

</template>